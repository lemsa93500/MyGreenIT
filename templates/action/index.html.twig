{% extends 'base.html.twig' %}

{% block title %}Liste des Actions — MyGreenIT{% endblock %}

{% block body %}
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3 text-success fw-bold mb-0">
      <i class="bi bi-lightning-charge"></i> Actions écologiques
    </h1>
    <a href="{{ path('admin_action_new') }}" class="btn btn-success">
      <i class="bi bi-plus-circle"></i> Nouvelle action
    </a>
  </div>

  <table class="table table-hover align-middle shadow-sm">
    <thead class="table-success">
      <tr>
        <th>ID</th>
        <th>Titre</th>
        <th>Catégorie</th>
        <th>Difficulté</th>
        <th>Points</th>
        <th>Active</th>
        <th>Créée le</th>
        <th class="text-end">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for action in actions %}
        <tr>
          <td>{{ action.id }}</td>
          <td class="fw-semibold">{{ action.title }}</td>
          <td><span class="badge bg-secondary">{{ action.category }}</span></td>
          <td>
            {% if action.difficulty == 1 %}
              <span class="badge bg-success">1</span>
            {% elseif action.difficulty == 2 %}
              <span class="badge bg-info text-dark">2</span>
            {% elseif action.difficulty == 3 %}
              <span class="badge bg-warning text-dark">3</span>
            {% elseif action.difficulty == 4 %}
              <span class="badge bg-orange bg-opacity-75">4</span>
            {% else %}
              <span class="badge bg-danger">5</span>
            {% endif %}
          </td>
          <td>{{ action.basePoints }}</td>
          <td>
            {% if action.isActive %}
              <i class="bi bi-check-circle-fill text-success"></i>
            {% else %}
              <i class="bi bi-x-circle-fill text-danger"></i>
            {% endif %}
          </td>
          <td>{{ action.createdAt ? action.createdAt|date('d/m/Y H:i') : '' }}</td>
          <td class="text-end">
            <a href="{{ path('admin_action_show', {'id': action.id}) }}" class="btn btn-sm btn-outline-secondary">
              <i class="bi bi-eye"></i>
            </a>
            <a href="{{ path('admin_action_edit', {'id': action.id}) }}" class="btn btn-sm btn-outline-primary">
              <i class="bi bi-pencil"></i>
            </a>
          </td>
        </tr>
      {% else %}
        <tr>
          <td colspan="8" class="text-center text-muted py-4">Aucune action enregistrée.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="mt-4">
    <a href="{{ path('app_home') }}" class="btn btn-outline-success">
      <i class="bi bi-arrow-left"></i> Retour à l'accueil
    </a>
  </div>
{% endblock %}
